<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>For Khushi üíñ</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    background: #ffe6f0;
  }
  canvas {
    position: absolute;
    top: 0;
    left: 0;
  }
  video {
    display: none;
  }
</style>
</head>
<body>

<video id="video" autoplay playsinline muted></video>
<canvas id="canvas"></canvas>

<script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands@0.11.1/hands.js"></script>

<script>
/* ================= BASIC SETUP ================= */
const video = document.getElementById("video");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

/* ================= PARTICLES ================= */
const particles = [];
const COUNT = 350;

for (let i = 0; i < COUNT; i++) {
  particles.push({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    vx: (Math.random() - 0.5) * 1.5,
    vy: (Math.random() - 0.5) * 1.5,
    r: Math.random() * 2 + 1
  });
}

/* ================= MEDIAPIPE ================= */
const hands = new Hands({
  locateFile: (file) =>
    `https://cdn.jsdelivr.net/npm/@mediapipe/hands@0.11.1/${file}`
});

hands.setOptions({
  maxNumHands: 1,
  modelComplexity: 0, // üî• LITE MODEL (IMPORTANT)
  minDetectionConfidence: 0.6,
  minTrackingConfidence: 0.6
});

let gesture = null;

hands.onResults((res) => {
  if (!res.multiHandLandmarks) {
    gesture = null;
    return;
  }

  const l = res.multiHandLandmarks[0];

  const open =
    l[8].y < l[6].y &&
    l[12].y < l[10].y &&
    l[16].y < l[14].y &&
    l[20].y < l[18].y;

  const fist =
    l[8].y > l[6].y &&
    l[12].y > l[10].y &&
    l[16].y > l[14].y &&
    l[20].y > l[18].y;

  const point =
    l[8].y < l[6].y &&
    l[12].y > l[10].y &&
    l[16].y > l[14].y &&
    l[20].y > l[18].y;

  if (open) gesture = "open";
  else if (fist) gesture = "fist";
  else if (point) gesture = "point";
  else gesture = null;
});

/* ================= CAMERA ================= */
async function startCamera() {
  const stream = await navigator.mediaDevices.getUserMedia({ video: true });
  video.srcObject = stream;
  await video.play();

  async function loop() {
    await hands.send({ image: video });
    requestAnimationFrame(loop);
  }
  loop();
}
startCamera();

/* ================= ANIMATION ================= */
function animate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  particles.forEach((p, i) => {
    if (gesture === "open") {
      const t = i / COUNT * Math.PI * 2;
      p.x = canvas.width / 2 + 120 * Math.sin(t) ** 3;
      p.y = canvas.height / 2 -
            80 * (Math.cos(t) - Math.cos(2*t)/2);
    }
    else if (gesture === "fist") {
      p.x += (canvas.width/2 - p.x) * 0.05;
      p.y += (canvas.height/2 - p.y) * 0.05;
    }
    else {
      p.x += p.vx;
      p.y += p.vy;
    }

    if (p.x < 0) p.x = canvas.width;
    if (p.x > canvas.width) p.x = 0;
    if (p.y < 0) p.y = canvas.height;
    if (p.y > canvas.height) p.y = 0;

    ctx.beginPath();
    ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
    ctx.fillStyle = "hotpink";
    ctx.fill();
  });

  if (gesture === "open") {
    ctx.fillStyle = "red";
    ctx.font = "50px cursive";
    ctx.textAlign = "center";
    ctx.fillText("Khushi üíñ", canvas.width/2, canvas.height/2 + 100);
  }

  if (gesture === "fist") {
    ctx.fillStyle = "red";
    ctx.font = "60px cursive";
    ctx.textAlign = "center";
    ctx.fillText("I LOVE YOU ‚ù§Ô∏è", canvas.width/2, canvas.height/2);
  }

  requestAnimationFrame(animate);
}
animate();
</script>
</body>
</html>



